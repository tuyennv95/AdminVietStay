{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/tuyennguyen/KLTN/ADMIN/src/component/Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport { BASE_API } from '../constant/index';\nimport axios from 'axios';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nconst useStyles = makeStyles(theme => ({\n  login: {\n    width: '20%',\n    margin: '0 auto',\n    marginTop: '250px'\n  },\n  input: {\n    padding: '5px 0',\n    marginBottom: '20px'\n  },\n  text: {\n    display: 'block'\n  }\n}));\nexport default function MenuListComposition() {\n  _s();\n\n  const classes = useStyles();\n  const [info, setInfo] = React.useState({\n    user: '',\n    pass: ''\n  });\n\n  function onChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    setInfo({ ...info,\n      [name]: value\n    });\n  }\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  function setLogin() {\n    axios.post('http://localhost:1337/auth/local', {\n      identifier: info.user,\n      password: info.pass\n    }).then(response => {\n      console.log(response.data);\n\n      if (response.data.user.role.type === \"admin\") {\n        document.cookie = `${response.data.user.username}=${response.data.jwt}, expires=${new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)}`;\n        dispatch({\n          type: \"LOGIN_SUCCESS\",\n          payload: {\n            name: response.data.user.username,\n            jwt: response.data.jwt\n          }\n        });\n        history.push(\"/users\");\n      }\n    }).catch(error => {\n      // Handle error.\n      console.log('An error occurred:', error.response);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.login,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: classes.text,\n      children: \"User\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: classes.input,\n      name: \"user\",\n      value: info.user,\n      onChange: onChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: classes.text,\n      children: \"PassWord\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      className: classes.input,\n      name: \"pass\",\n      onChange: onChange,\n      value: info.pass\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      onClick: setLogin,\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MenuListComposition, \"A+E5x6JSLtIgBa+yFB7ANBB4hEI=\", false, function () {\n  return [useStyles, useDispatch, useHistory];\n});\n\n_c = MenuListComposition;\n\nvar _c;\n\n$RefreshReg$(_c, \"MenuListComposition\");","map":{"version":3,"sources":["/home/tuyennguyen/KLTN/ADMIN/src/component/Login.jsx"],"names":["React","makeStyles","Button","BASE_API","axios","useDispatch","useHistory","useStyles","theme","login","width","margin","marginTop","input","padding","marginBottom","text","display","MenuListComposition","classes","info","setInfo","useState","user","pass","onChange","e","name","value","target","dispatch","history","setLogin","post","identifier","password","then","response","console","log","data","role","type","document","cookie","username","jwt","Date","now","payload","push","catch","error"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport { BASE_API } from '../constant/index';\nimport axios from 'axios';\nimport {useDispatch} from 'react-redux';\nimport {useHistory} from 'react-router-dom';\nconst useStyles = makeStyles((theme) => ({\n  login: {\n    width: '20%',\n    margin: '0 auto',\n    marginTop: '250px'\n  },\n  input: {\n    padding: '5px 0',\n    marginBottom: '20px'\n  },\n  text: {\n    display: 'block'\n  }\n}));\n\nexport default function MenuListComposition() {\n  const classes = useStyles();\n  const [info, setInfo] = React.useState({\n    user: '',\n    pass: '',\n  });\n  function onChange(e) {\n    const { name, value } = e.target;\n    setInfo({ ...info, [name]: value })\n  }\n  const dispatch = useDispatch();\n  const history = useHistory();\n  function setLogin() {\n    axios\n      .post('http://localhost:1337/auth/local', {\n        identifier: info.user,\n        password: info.pass,\n      })\n      .then(response => {\n        console.log(response.data)\n        if(response.data.user.role.type === \"admin\"){\n        document.cookie = `${response.data.user.username}=${response.data.jwt}, expires=${new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)}`;\n\n          dispatch({\n            type:\"LOGIN_SUCCESS\",\n            payload:{\n             name: response.data.user.username,\n             jwt: response.data.jwt,\n            }\n          })\n          history.push(\"/users\");\n        }\n      })\n      .catch(error => {\n        // Handle error.\n        console.log('An error occurred:', error.response);\n      });\n  }\n  \n  return (\n    <div className={classes.login}>\n      <label className={classes.text}>User</label>\n      <input\n        type=\"text\"\n        className={classes.input}\n        name=\"user\"\n        value={info.user}\n        onChange={onChange}\n\n      />\n      <label className={classes.text}>PassWord</label>\n      <input\n        type=\"password\"\n        className={classes.input}\n        name=\"pass\"\n        onChange={onChange}\n        value={info.pass} />\n      <Button variant=\"contained\" onClick={setLogin}>Login</Button>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}